<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Review - BookReview</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

    <!-- Offcanvas Navbar Trigger -->
    <nav class="navbar navbar-light bg-white shadow-sm">
        <div class="container">
            <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
                â˜° Menu
            </button>
            <a class="navbar-brand ms-3 fw-bold text-primary" href="{% url 'index' %}">BookReview</a>
        </div>
    </nav>

    <!-- Offcanvas Sidebar -->
    <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title text-primary" id="offcanvasNavbarLabel">Navigation</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'book_list' %}">Books List</a>
                </li>
                {% if user.is_authenticated %}
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'profile' %}">My Profile</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-danger" href="{% url 'logout' %}">Logout</a>
                </li>
                {% else %}
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'login' %}">Login</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'register' %}">Register</a>
                </li>
                {% endif %}
            </ul>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container py-5">
        <h2 class="display-4 text-primary">Add Review</h2>

        <form method="POST" enctype="multipart/form-data" class="mt-4">
            {% csrf_token %}

            <!-- Book Selection -->
            <div class="mb-3">
                <label for="id_book" class="form-label">Existing Book</label>
                {{ form.book }}
                <div id="existing-book-section">
                    {% if form.book.value %}
                        <!-- Existing book fields will show if selected -->
                    {% endif %}
                </div>

                <div id="new-book-section">
                    <label for="id_new_book_title" class="form-label">New Book Title</label>
                    {{ form.new_book_title }}
                    <label for="id_genre" class="form-label">Genre</label>
                    {{ form.genre }}
                    <label for="id_release_date" class="form-label">Release Date</label>
                    {{ form.release_date }}
                </div>
            </div>

            <!-- Author Selection -->
            <div class="mb-3">
                <label for="id_author" class="form-label">Existing Author</label>
                {{ form.author }}

                <div id="existing-author-section">
                    {% if form.author.value %}
                        <!-- Existing author fields will show if selected -->
                    {% endif %}
                </div>

                <div id="new-author-section">
                    <label for="id_new_author_name" class="form-label">New Author Name</label>
                    {{ form.new_author_name }}
                    <label for="id_nationality" class="form-label">Nationality</label>
                    {{ form.nationality }}
                    <label for="id_birth_date" class="form-label">Birth Date</label>
                    {{ form.birth_date }}
                </div>
            </div>

            <!-- Review Fields -->
            <div class="mb-3">
                <label for="id_rating" class="form-label">Rating</label>
                {{ form.rating }}
            </div>

            <div class="mb-3">
                <label for="id_content" class="form-label">Review Content</label>
                {{ form.content }}
            </div>
            
            <div class="mb-3">
                <label for="id_cover_image" class="form-label">Book Cover</label>
                {{ form.cover_image }}
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-success">Submit Review</button>
        </form>

        <div class="mt-4">
            <a href="{% url 'book_list' %}" class="btn btn-secondary">Back to Books List</a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
